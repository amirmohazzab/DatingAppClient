<div class="py-3" style="height:100vh; background-color:lightsteelblue">
    <div class="album py-5" style="background-color:lightsteelblue">
        <div class="container">
            <div class="row m-4">
          <div class="btn-group">
            <button class="btn btn-primary" (click)="changeContainer('Unread')">
              <i class="fa fa-envelope"></i> Unread
            </button>
            <button class="btn btn-primary" (click)="changeContainer('Inbox')">
              <i class="fa fa-envelope-open"></i> Inbox
            </button>
            <button class="btn btn-primary" (click)="changeContainer('Outbox')">
              <i class="fa fa-paper-plane"></i> Outbox
            </button>
          </div>
        </div>
        @if (result?.items?.length === 0){
          <div class="row w-100 alert alert-primary text-center">
          <h4>
            No Message Found
          </h4>
        </div>
        }

        @if (result?.items?.length > 0){
          <div class="row">
            <table class="table table-hover table-bordered" style="cursor:pointer">
                <thead>
                  <tr>
                    <th style="width: 40%">message</th>
                    <th style="width: 20%">From / To</th>
                    <th style="width: 20%">Sent / Received</th>
                    <th style="width: 20%"></th>
                  </tr>
                </thead>
                <tbody>
                  @for (item of result?.items; track $index){
                    <tr [hidden]="loading">
                      <td>{{item?.content}}</td>
                      <td>
                        @if (messageParams?.container === 'Outbox'){
                          <div>
                            <a 
                              routerLink="['/member', item?.ReceiverUserName]"
                              [queryParams] = "{ tab: '2'}"
                              routerLinkActive = "router-link-active"
                            >
                                <img 
                                  style="max-width: 40px; margin-right: 15px"
                                  class="img-circle rounded-circle mr-2 pr-5"
                                  [src] = "item.receiverPhotoUrl || '../../../images/user.jpg'" 
                                  [alt] = "item.receiverUserName"
                                >
                                <strong>{{item.receiverUserName}}</strong>
                          </a>
                          </div>
                        }
                        @if (messageParams?.container !== 'Outbox'){
                          <div>
                            <a
                              routerLink="['/member', item?.senderUserName]"
                              [queryParams] = "{ tab: '2'}"
                              routerLinkActive = "router-link-active"
                            >
                                <img 
                                  style="max-width: 40px; margin-right: 15px"
                                  class="img-circle rounded-circle mr-2 pr-5" 
                                  [src] = "item.senderPhotoUrl || '../../../images/user.jpg'" 
                                  [alt] = "item.senderUserName"
                                  >
                                  <strong>{{item.senderUserName}}</strong>
                          </a>
                          </div>
                        }
                      </td>
                      <td>
                        {{item?.messageSent | timeAgo}}
                      </td>
                      <td>
                        <button class="btn btn-danger" style="margin-right: 10px;">
                          <span class="fas fa-trash" ></span>
                        </button>
                        <button class="btn btn-warning">
                          <span class="fas fa-edit" ></span>
                        </button>
                      </td>
                    </tr>
                  }
                </tbody>
            </table>
          </div>
        }

      @if (result?.totalCount > 0){
          <div class="d-flex justify-content-center mt-3">
              <pagination 
                  (totalItems)="result?.totalCount" 
                  [(ngModel)] ="result.currentPage" 
                  (pageChanged)="pageChanged($event)">
              </pagination>
          </div>
      }
        </div>
    </div>
</div>


